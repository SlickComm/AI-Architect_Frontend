@import "@xyflow/react/dist/style.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

  :root {
    --background: #ffffff;
  }

  body {
    color: var(--foreground);
    background: var(--background);
    font-family: Arial, Helvetica, sans-serif;
  }

  /* Login */
  .login-container {
    @apply flex items-center justify-center min-h-screen bg-gray-900;
  }

  .login-box {
    @apply bg-gray-800 p-8 rounded shadow-md w-full max-w-md;
  }

  .login-title {
    @apply text-2xl font-bold text-white mb-6;
  }

  .login-formGroup {
    @apply mb-4;
  }

  .login-label {
    @apply block text-gray-300 mb-1;
  }

  .login-input {
    @apply w-full p-2 rounded bg-gray-700 text-white border border-gray-600;
  }

  .login-button {
    @apply w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded;
  }

  .login-textInfo {
    @apply text-gray-400 mt-4;
  }

  .login-link {
    @apply text-blue-500 hover:underline;
  }

  /* Registrierung */
  .register-container {
    @apply flex items-center justify-center min-h-screen bg-gray-900;
  }

  .register-box {
    @apply bg-gray-800 p-8 rounded shadow-md w-full max-w-md;
  }

  .register-title {
    @apply text-2xl font-bold text-white mb-6;
  }

  .register-formGroup {
    @apply mb-4;
  }

  .register-label {
    @apply block text-gray-300 mb-1;
  }

  .register-input {
    @apply w-full p-2 rounded bg-gray-700 text-white border border-gray-600;
  }

  .register-button {
    @apply w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded;
  }

  .register-textInfo {
    @apply text-gray-400 mt-4;
  }

  .register-link {
    @apply text-blue-500 hover:underline;
  }
  
  /* Home */
  .home-container {
    @apply h-screen flex flex-col bg-gray-900 text-white m-0 p-0;
  }
  
  .home-preview {
    @apply flex-1 relative border-gray-700 overflow-auto;
  }

  .home-initialScreen {
    @apply w-full h-full bg-gray-900 flex flex-col justify-center items-center;
  }
  
  .home-initialLogo {
    @apply mb-4 h-auto; 
  }
  
  .home-initialTitle {
    @apply text-4xl text-white font-bold;
  }

  .home-subtitle {
    @apply mt-2 mb-8;
  }

  .home-start-chat-btn {
    @apply inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 
           text-white font-medium rounded-lg transition-colors duration-200
           shadow-lg hover:shadow-xl transform hover:scale-105;
  }
  
  .home-viewer {
    @apply w-full h-full p-0 box-border;
  }
  
  .home-inputContainer {
    @apply p-4 border-t border-gray-700 bg-gray-800;
  }

  .home-action {
    @apply flex gap-2;
  }
  
  .home-input {
    @apply w-full p-3 text-base box-border border border-gray-600 rounded bg-gray-900 text-white;
  }

  .home-download {
    @apply px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700;
  }

  .home-chatBubble {
    @apply mt-2 mb-2 py-2 px-2 bg-gray-800 border border-gray-600 rounded;
  }

  .home-hint {
    @apply text-sm m-1;
  }
  
  .hidden {
    display: none;
  }

  /* Navbar */
  .navbar {
    @apply fixed top-0 left-0 w-full bg-gray-800 text-white z-50;
  }

  .navbar-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .navbar-inner {
    @apply flex justify-between h-16 items-center;
  }

  .navbar-brand {
    @apply flex-shrink-0 text-xl font-bold;
  }

  .navbar-hamburger {
    @apply flex sm:hidden;
  }
  
  .navbar-hamburger-button {
    @apply inline-flex items-center justify-center p-2 rounded-md hover:bg-gray-700 focus:outline-none;
  }

  .navbar-hamburger-icon {
    @apply block h-6 w-6;
  }

  .navbar-desktop-menu {
    @apply hidden sm:flex sm:items-center space-x-4;
  }

  .navbar-menu-item {
    @apply hover:bg-gray-700 px-3 py-2 rounded-md;
  }

  .navbar-mobile-menu {
    @apply sm:hidden;
  }

  .navbar-mobile-inner {
    @apply px-2 pt-2 pb-3 space-y-1;
  }

  .navbar-mobile-item {
    @apply block px-3 py-2 rounded-md hover:bg-gray-700 text-left;
  }

  .navbar-mobile-button {
    @apply w-full;
  }

  /* ---------- Review-Pane ---------- */
  .review-pane {
    @apply flex flex-col gap-4 pt-10 pb-10 pl-8 pr-8 overflow-y-auto h-[calc(100vh-theme(spacing.48))];
  }

  .rp-heading {
    @apply text-lg mt-10 font-semibold text-gray-200;
  }

  .rp-list {
    @apply flex flex-col gap-3; 
  }

  .rp-row {
    @apply grid grid-cols-[1fr_auto] gap-4 px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/40 items-stretch;
  }

  .rp-row-ok {
    @apply bg-gray-800/50;
  }

  .rp-left {
    @apply flex flex-col gap-1;
  }

  .rp-header {
    @apply flex items-center justify-between gap-3;
  }

  .rp-aufmass {
    @apply text-sm text-gray-200 leading-5;
  }
  .rp-pos {
    @apply shrink-0 font-mono text-xs text-gray-300;
  }

  .rp-desc {
    @apply text-xs text-gray-400 leading-5;
  }

  .rp-select {
    @apply border border-gray-600 bg-gray-900 text-gray-200 rounded px-2 py-1 text-sm focus:outline-none;
  }

  .rp-action-cell {
    @apply self-stretch flex items-center justify-end;
  }

  .rp-action-btn {
    @apply inline-flex items-center justify-center h-9 w-9 rounded-lg border border-gray-600/60 bg-gray-800/70 text-gray-200 hover:bg-gray-700/70 focus:outline-none focus:ring-2 focus:ring-blue-500/60 transition;
  }

  .step-mini-slot { 
    @apply w-9 h-9 shrink-0 flex items-center justify-center; 
  }

  .step-mini-btn {
    @apply inline-flex items-center justify-center h-9 w-9 rounded-full border border-gray-700 bg-gray-800 text-gray-200 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/60 transition shadow-md;
  }

  /* ---------- Step-Switcher ---------- */
  .step-switch-wrapper {
    @apply sticky top-0 z-40 w-full flex justify-center pt-3;
  }

  .step-switch-inner {
    @apply inline-flex rounded-full bg-gray-700 p-1 shadow-lg;
  }

  .step-switch-btn {
    @apply px-4 py-1.5 text-sm font-medium rounded-full transition;
  }

  .step-switch-btn--active {
    @apply bg-blue-600 text-white shadow;
  }

  .step-switch-btn--idle {
    @apply text-gray-300 hover:bg-gray-600/60;
  }

  /* ---------- Buttons ---------- */
  .btn-primary {
    @apply px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 transition disabled:opacity-50;
  }

  .btn-secondary {
    @apply px-4 py-2 rounded bg-gray-600 text-white hover:bg-gray-700 transition disabled:opacity-50;
  }

  /* Spinner (8×8 px, grauer Ring) */
  .spinner {
    @apply inline-block w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin;
  }
  
  /* Tooltip */
  .help-wrap { @apply relative shrink-0; }

  .help-btn {
    @apply inline-flex items-center justify-center p-4 rounded bg-blue-600 text-white hover:bg-blue-700 transition;
  }

  .tt {
    @apply absolute z-50 max-w-[90vw] w-[34rem] whitespace-normal rounded bg-gray-800 border border-gray-700 px-3 py-2 text-xs text-gray-200 opacity-0 transition shadow-lg;
  }
  
  .tt--open { @apply opacity-100 pointer-events-auto; }

  .tt-top-start { @apply bottom-full left-0 mb-3; }

  /* ---------- Modal ---------- */
  .modal-overlay { 
    @apply fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4; 
  }

  .modal-panel   { 
    @apply w-full max-w-5xl bg-gray-900 border border-gray-700 rounded-xl shadow-2xl; 
  }

  .modal-header  { 
    @apply flex items-center justify-between px-5 py-3 border-b border-gray-800; 
  }

  .modal-title   { 
    @apply text-lg font-semibold text-gray-100; 
  }

  .modal-body    { 
    @apply p-5 pt-4 space-y-4; 
  }

  .modal-footer  { 
    @apply px-5 py-3 border-t border-gray-800 flex items-center justify-end gap-2; 
  }

  .icon-btn      { 
    @apply inline-flex items-center justify-center h-9 w-9 rounded-lg bg-gray-800/70 border border-gray-700 hover:bg-gray-700/70 focus:outline-none focus:ring-2 focus:ring-blue-500/60 transition text-gray-200; 
  }

  /* ---------- Tabs ---------- */
  .modal-tabs { 
    @apply flex gap-2 mb-3; 
  }
  .tab-btn         { 
    @apply px-3 py-1.5 rounded-md text-sm transition; 
  }

  .tab-btn--active { 
    @apply bg-blue-600 text-white shadow; 
  }

  .tab-btn--idle   { 
    @apply bg-gray-800 text-gray-200 hover:bg-gray-700; 
  }

  /* ---------- LV Tabelle ---------- */
  .lv-table  { 
    @apply w-full border border-gray-700 rounded-lg overflow-hidden; 
  }

  .lv-thead  { 
    @apply bg-gray-800; 
  }

  .lv-tr     { 
    @apply grid grid-cols-[2.5rem,5rem,5rem,6rem,1fr,6rem,6rem]; 
  }

  .lv-th     { 
    @apply px-3 py-2 text-xs font-semibold text-gray-300 uppercase tracking-wide border-b border-gray-700; 
  }

  .lv-tbody  { 
    @apply divide-y divide-gray-800 max-h-[50vh] overflow-auto; 
  }

  .lv-row    { 
    @apply items-center cursor-pointer hover:bg-gray-800/60; 
  }

  .lv-row--active { 
    @apply bg-gray-800/80; 
  }

  .lv-td     { 
    @apply px-3 py-2 text-sm text-gray-200 flex items-center; 
  }

  .lv-checkbox { 
    @apply h-4 w-4; 
  }

  /* ---- Modal Basis ---- */
  .modal-overlay { 
    @apply fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4; 
  }
  
  .modal-panel   { 
    @apply w-full max-w-4xl rounded-xl bg-gray-800 border border-gray-700 shadow-2xl; 
  }

  .modal-header  { 
    @apply flex items-center justify-between px-5 py-4 border-b border-gray-700; 
  }

  .modal-title   { 
    @apply text-lg font-semibold text-gray-100; 
  }

  .modal-body    { 
    @apply p-5 max-h-[70vh] overflow-y-auto; 
  }

  .modal-footer  { 
    @apply flex items-center justify-end gap-2 px-5 py-4 border-t border-gray-700; 
  }

  .icon-btn      { 
    @apply inline-flex items-center justify-center h-9 w-9 rounded-lg border border-gray-600/60 bg-gray-800/70 text-gray-200 hover:bg-gray-700/70 focus:outline-none focus:ring-2 focus:ring-blue-500/60 transition; 
  }
  
  .mono-block {
    @apply bg-gray-900 border border-gray-700 rounded p-3 font-mono text-xs text-gray-200 whitespace-pre-wrap leading-relaxed;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center h-8 w-8 rounded-md border border-gray-600/60 bg-gray-800/70 text-gray-200 hover:bg-gray-700/70 focus:outline-none focus:ring-2 focus:ring-blue-500/60 transition;
  }

  .tbl-grid {
    @apply grid grid-cols-[36px_56px_1fr_44px] gap-x-3 items-center;
  }

  /* Header */
  .tbl-head {
    @apply tbl-grid px-4 py-2.5 bg-gray-800/70 border border-gray-700
           rounded-t-xl;
  }

  .tbl-th {
    @apply text-xs font-semibold text-gray-300 tracking-wide;
  }

  /* Body-Wrapper: kleiner Abstand nach oben + sanfter Hintergrund */
  .tbl-body {
    @apply border-x border-b border-gray-700 rounded-b-xl
           bg-gray-900/40 pt-2 pb-2;
  }

  /* Zeile: dezente Pill-Optik, Zebra, Hover */
  .tbl-row {
    @apply tbl-grid px-3 py-2 items-center
           border-t border-gray-700/60 first:border-t-0
           mx-2 rounded-lg
           odd:bg-gray-800/30 even:bg-gray-800/20
           hover:bg-gray-800/50 transition-colors;
  }

  /* Zellen + Input */
  .tbl-td { @apply text-sm text-gray-200; }

  .tbl-input {
    @apply w-full px-3 py-2 rounded-lg
           bg-gray-900 text-gray-100
           border border-gray-700
           focus:outline-none focus:ring-2 focus:ring-blue-500/50;
  }

  /* Icon-Button */
  .btn-icon {
    @apply flex items-center justify-center w-8 h-8 rounded-lg
           border border-white/10 bg-transparent
           hover:bg-white/5 hover:border-white/20;
  }
  
  .btn-icon > svg { @apply w-[18px] h-[18px]; }
  .btn-icon.danger:hover > svg { @apply stroke-[#ff6b6b]; }

  /* ---------- Chat-Sidebar ---------- */
  .chat-sidebar {
    @apply fixed top-0 left-0 h-full w-80 bg-gray-800 border-r border-gray-700 
           transform -translate-x-full transition-transform duration-300 ease-in-out
           z-40 flex flex-col;
  }

  .chat-sidebar--open {
    @apply translate-x-0;
  }

  .sidebar-overlay {
    @apply fixed inset-0 bg-black/50 z-30 lg:hidden;
  }

  .sidebar-header {
    @apply p-4 border-b border-gray-700;
  }

  .sidebar-new-chat-btn {
    @apply w-full flex items-center gap-3 px-4 py-3 text-sm font-medium
           bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors;
  }

  .sidebar-content {
    @apply flex-1 overflow-y-auto p-2;
  }

  .sidebar-loading {
    @apply flex flex-col items-center justify-center h-32 gap-2 text-gray-400;
  }

  .sidebar-empty {
    @apply flex flex-col items-center justify-center h-32 text-center;
  }

  .sidebar-sessions {
    @apply space-y-1;
  }

  .session-item {
    @apply flex items-center justify-between p-3 rounded-lg cursor-pointer
           hover:bg-gray-700/50 transition-colors;
  }

  .session-item:hover .session-delete-btn {
    @apply opacity-100;
  }

  .session-item--active {
    @apply bg-gray-700;
  }

  .session-main {
    @apply flex items-start gap-3 flex-1 min-w-0;
  }

  .session-icon-wrapper {
    @apply relative flex-shrink-0;
  }

  .session-icon {
    @apply w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5;
  }

  .session-dxf-indicator {
    @apply absolute -top-0.5 -right-0.5 w-2 h-2 text-green-400;
  }

  .session-content {
    @apply flex-1 min-w-0;
  }

  .session-name {
    @apply text-sm font-medium text-gray-100 truncate mb-1;
  }

  .session-name-input {
    @apply w-full px-2 py-1 text-sm bg-gray-900 border border-gray-600 
           rounded text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500;
  }

  .session-preview {
    @apply text-xs text-gray-400 line-clamp-2 mb-1;
  }

  .session-date {
    @apply text-xs text-gray-500;
  }

  .session-delete-btn {
    @apply opacity-0 p-1 rounded 
           hover:bg-gray-600 text-gray-400 hover:text-red-400 
           transition-all duration-200;
  }

  .sidebar-footer {
    @apply p-4 border-t border-gray-700 text-center;
  }

  .top-bar {
    @apply fixed top-4 left-4 z-50 flex items-center gap-2;
  }

  .sidebar-toggle-btn {
    @apply p-2 bg-gray-800 hover:bg-gray-700 
           text-gray-200 rounded-lg border border-gray-600
           transition-colors;
  }

  .new-chat-btn {
    @apply flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 
           text-white font-medium rounded-lg transition-colors duration-200
           shadow-lg hover:shadow-xl;
  }

  .new-chat-btn-text {
    @apply text-sm font-medium hidden sm:inline;
  }

  /* Desktop-Anpassungen - Top-Bar bleibt immer links */
  @media (min-width: 1024px) {
    .top-bar {
      @apply left-4; /* Immer am linken Rand, da Sidebar jetzt togglebar ist */
    }
  }

  /* Hauptinhalt-Anpassungen */
  .main-content {
    @apply flex-1 flex flex-col transition-all duration-300 pt-16;
  }

  .main-content--with-sidebar {
    @apply lg:ml-80;
  }

  /* Desktop-Responsive */
  @media (min-width: 1024px) {
    .chat-sidebar--open {
      @apply translate-x-0;
    }

    .sidebar-overlay {
      @apply hidden;
    }

    .home-container {
      @apply pl-0;
    }

    .main-content--with-sidebar {
      @apply lg:ml-80;
    }
  }

  /* Line-clamp utility für session-preview */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
